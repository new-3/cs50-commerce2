<!-- Detailed Information about a Selected Listing -->
{% extends "auctions/layout.html" %}
{% load static %}

{% block body %}
    <h2 class="text-center py-5">Listing</h2>

    <div class="container-lg my-2 bd-blue-800 min-vh-50">
        <div class="p-2 col-sm-6 col-lg-6 ">
            <p class="display-6 fw-bold">{{ listing.title }}</p>
            <p class="text-end"> submited by {{ listing.user }}</p>
        </div>
        <div class="row">
            <!-- img area start -->
            <div class="border p-2 col-sm-6 col-lg-6 listing_img_container">
            {% if listing.image_url %}
                <img class="img-fluid rounded mx-auto d-block listing_img" src="{{ listing.image_url }}">
            {% else %}
                <img class="img-fluid rounded mx-auto d-block listing_img" src="{% static 'auctions/images/noimg.svg' %}">
            {% endif %}    
            </div>
            <!-- img area end -->
            <!-- bid btn area start -->
            <div class="border col-sm-6 col-lg-6 d-flex justify-content-center align-items-center mx-auto">
                <!-- d-flex class is needed to align elements (due to heights decided by size of img)-->
                {% if user.is_authenticated %}
                    {% if listing.user == request.user %}                        <form class="#" action="">
                        <div class="align-items-center p-5">
                        <div class="input-group flex-nowrap">
                            <span class="input-group-text" id="addon-wrapping">$</span>
                                <input type="number" class="form-control disabled" placeholder="Bid Price" aria-label="Bid Price" aria-describedby="addon-wrapping">
                                <button type="submit" class="btn btn-primary disabled" id="submit-addon">Bid!</button>
                        </div>
                    </form>
                        <p>Sellers cannot bid on their own listings.</p>
                    {% else %}
                        <form class="#" action="POST">
                            <div class="align-items-center p-5">
                            <div class="input-group flex-nowrap">
                                <span class="input-group-text" id="addon-wrapping">$</span>
                                    <input type="number" class="form-control" placeholder="Bid Price" aria-label="Bid Price" aria-describedby="addon-wrapping">
                                    <button type="submit" class="btn btn-primary" id="submit-addon">Bid!</button>
                            </div>
                        </form>
                    {% endif %}
                {% else %}
                    <p>You must be <a href="{% url 'login' %}">logged in</a> to bid.</p>
                {% endif %}
                </div>
            </div>
            <!-- bid btn area end -->
        
        <div class="p-2 col-sm-6 col-lg-6 ">
            <p class="">Description</p>
            <p class="">{{ listing.desc}}</p>
            <p class="">status : {{ listing.get_status_display }}</p>
            <p> {{ listing.bids }}</p>
            <p> Category : {{ listing.get_category_display }}</p>
            <p> created_at : {{ listing.created_at }}</p>
            <p> edited_at : {{ listing.edited_at }}</p>
        </div>
     </div>
    </div>
    </div>
{% endblock %}